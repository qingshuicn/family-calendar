(function(){"use strict";var e={5413:function(e,t,n){var a=n(5130),o=n(6768);const r={id:"app"};function s(e,t,n,a,s,i){const u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("main",null,[(0,o.bF)(u)])])}var i={name:"App"},u=n(1241);const l=(0,u.A)(i,[["render",s]]);var c=l,v=n(1387),d=(n(4114),n(144)),p=n(4232);const f=e=>((0,o.Qi)("data-v-23b8c7fe"),e=e(),(0,o.jt)(),e),m={class:"calendar-sidebar"},b={class:"nav-buttons"},h={class:"calendar"},k={class:"weekdays"},y={class:"days"},g=f((()=>(0,o.Lk)("input",{type:"text",placeholder:"搜索日程...",class:"search-input"},null,-1)));function C(e,t,n,a,r,s){return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",b,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.previousMonth&&e.previousMonth(...t))},"<"),(0,o.Lk)("span",null,(0,p.v_)(e.currentMonthYear),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextMonth&&e.nextMonth(...t))},">")]),(0,o.Lk)("div",h,[(0,o.Lk)("div",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.weekdays,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e},(0,p.v_)(e),1)))),128))]),(0,o.Lk)("div",y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.calendarDays,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e.date,class:(0,p.C4)({"current-day":e.isToday,"other-month":!e.isCurrentMonth})},(0,p.v_)(e.date),3)))),128))])]),g])}var w={name:"CalendarSidebar",setup(){const e=(0,d.KR)(new Date),t=["日","一","二","三","四","五","六"],n=(0,o.EW)((()=>`${e.value.getFullYear()}年${e.value.getMonth()+1}月`)),a=(0,o.EW)((()=>[]));function r(){e.value=new Date(e.value.getFullYear(),e.value.getMonth()-1,1)}function s(){e.value=new Date(e.value.getFullYear(),e.value.getMonth()+1,1)}return{currentMonthYear:n,weekdays:t,calendarDays:a,previousMonth:r,nextMonth:s}}};const _=(0,u.A)(w,[["render",C],["__scopeId","data-v-23b8c7fe"]]);var L=_;const E={class:"family-tabs"},M=["onClick"];function I(e,t,n,a,r,s){return(0,o.uX)(),(0,o.CE)("div",E,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.familyMembers,(t=>((0,o.uX)(),(0,o.CE)("button",{key:t.id,class:(0,p.C4)(["member-tab",{active:t.id===e.activeMember}]),onClick:n=>e.setActiveMember(t.id)},(0,p.v_)(t.name),11,M)))),128)),(0,o.Lk)("button",{class:"add-event-btn",onClick:t[0]||(t[0]=(...t)=>e.addEvent&&e.addEvent(...t))},"+ 添加日程")])}var F={name:"FamilyTabs",setup(){const e=(0,d.KR)([{id:"all",name:"全家"},{id:"dad",name:"爸爸"},{id:"mom",name:"妈妈"},{id:"son",name:"弟弟"},{id:"daughter",name:"姐姐"},{id:"grandma",name:"阿姨"}]),t=(0,d.KR)("all");function n(e){t.value=e}function a(){console.log("添加新事件")}return{familyMembers:e,activeMember:t,setActiveMember:n,addEvent:a}}};const T=(0,u.A)(F,[["render",I],["__scopeId","data-v-48ba655a"]]);var X=T;const S={class:"schedule-view"},D={class:"time-column"},O={class:"events-column"};var A={__name:"ScheduleView",props:{events:{type:Array,required:!0}},setup(e){const t=[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22];function n(e){return`${e.toString().padStart(2,"0")}:00`}function a(e){return`${e.startDate.split("T")[1].slice(0,5)} - ${e.endDate.split("T")[1].slice(0,5)}`}function r(e){const t=parseInt(e.startDate.split("T")[1].split(":")[0]),n=parseInt(e.startDate.split("T")[1].split(":")[1]),a=parseInt(e.endDate.split("T")[1].split(":")[0]),o=parseInt(e.endDate.split("T")[1].split(":")[1]),r=60*(t-6+n/60),s=60*(a-t+(o-n)/60);return{top:`${r}px`,height:`${s}px`}}return(s,i)=>((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",D,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(t,(e=>(0,o.Lk)("div",{key:e,class:"time-slot"},(0,p.v_)(n(e)),1))),64))]),(0,o.Lk)("div",O,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(t,(e=>(0,o.Lk)("div",{key:e,class:"event-slot"}))),64)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.events,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"event",style:(0,p.Tr)(r(e))},[(0,o.Lk)("h3",null,(0,p.v_)(e.title),1),(0,o.Lk)("p",null,(0,p.v_)(a(e)),1)],4)))),128))])]))}};const x=(0,u.A)(A,[["__scopeId","data-v-c9631ba6"]]);var K=x;const $={class:"current-date-time"};var j={__name:"CurrentDateTime",setup(e){const t=(0,d.KR)("");function n(){const e=new Date,n=e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),a=e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});t.value=`${n} ${a}`}let a;return(0,o.sV)((()=>{n(),a=setInterval(n,6e4)})),(0,o.hi)((()=>{clearInterval(a)})),(e,n)=>((0,o.uX)(),(0,o.CE)("div",$,(0,p.v_)(t.value),1))}};const R=(0,u.A)(j,[["__scopeId","data-v-80a1425c"]]);var P=R;const W=e=>((0,o.Qi)("data-v-cfe41bd6"),e=e(),(0,o.jt)(),e),Y={class:"home-view"},V={class:"header"},N=W((()=>(0,o.Lk)("h1",null,"家庭日程",-1))),q={class:"layout"},z={class:"main-content"};var Q={__name:"HomeView",setup(e){const t=(0,d.KR)([]);let n;const a=()=>{const e="wss://family.aibigboom.com";n=new WebSocket(e),n.onmessage=e=>{const n=JSON.parse(e.data);"initial"===n.type?t.value=n.events:"newEvent"===n.type&&t.value.push(n.event)},n.onclose=()=>{console.log("WebSocket连接关闭，尝试重新连接..."),setTimeout(a,5e3)}};return(0,o.sV)((()=>{a()})),(0,o.hi)((()=>{n&&n.close()})),(e,n)=>((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",V,[N,(0,o.bF)(P)]),(0,o.Lk)("div",q,[(0,o.bF)(L),(0,o.Lk)("div",z,[(0,o.bF)(X),(0,o.bF)(K,{events:t.value},null,8,["events"])])])]))}};const H=(0,u.A)(Q,[["__scopeId","data-v-cfe41bd6"]]);var J=H;const U=[{path:"/",name:"home",component:J}],B=(0,v.aE)({history:(0,v.LA)("/"),routes:U});var G=B,Z=n(4373);Z.A.defaults.baseURL="https://family.aibigboom.com/api";const ee=(0,a.Ef)(c);ee.use(G);const te=()=>{"wakeLock"in navigator?navigator.wakeLock.request("screen").then((()=>{console.log("Screen will stay awake")})).catch((e=>{console.error(`${e.name}, ${e.message}`)})):console.warn("Wake Lock API not supported")};ee.mount("#app"),te()}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],r=e[c][2];for(var i=!0,u=0;u<a.length;u++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,s=a[0],i=a[1],u=a[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(u)var c=u(n)}for(t&&t(a);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(5413)}));a=n.O(a)})();
//# sourceMappingURL=app.03178768.js.map